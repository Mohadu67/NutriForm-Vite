:root {
  --couleur-principale: #F7F6F2;
  --couleur-bouton-action: #F7B186; /* peach */
  --couleur-bouton-selection: #B5EAD7; /* pastel green */
  --couleur-text-noir: #1b1b1b;
  --font-titre: 'Merriweather', serif;
  --font-p: 'Montserrat', sans-serif;
  /* UI tokens */
  --paper: #ffffff;
  --fg: #1b1b1b;
  --muted: #666;
  --subtle: #f3f2ef;
  --line: rgba(0,0,0,.12);
  --overlay: rgba(0,0,0,.45);
  --shadow-sm: 0 1px 0 rgba(0,0,0,0.04);
  --shadow: 0 18px 48px rgba(0,0,0,0.14);
}

[data-theme="dark"] {
  --couleur-principale: #171a19;
  --couleur-text-noir: #e9eceb;
  --paper: #171a19;
  --fg: #e9eceb;
  --muted: #a8b0ad;
  --subtle: #1f2321;
  --line: rgba(255,255,255,.14);
  --overlay: rgba(0,0,0,.6);
  --shadow-sm: 0 1px 0 rgba(0,0,0,0.5);
  --shadow: 0 22px 70px rgba(0,0,0,0.6);
}

.row {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  background: var(--paper);
  color: var(--fg);
  border: 1px solid var(--line);
  border-radius: 12px;
  padding: 0.7rem 0.9rem;
  cursor: pointer;
  width: 100%;
  text-align: left;
  transition: background 160ms ease, box-shadow 160ms ease, transform 120ms ease, border-color 160ms ease;
  box-shadow: var(--shadow-sm);
}
.row:hover { background: var(--couleur-principale); box-shadow: 0 3px 12px rgba(0,0,0,0.08); }
.row:active { transform: translateY(0); }
.row:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(181,234,215,0.55);
  border-color: #B5EAD7;
}

.thumb {
  width: 44px;
  height: 44px;
  border-radius: 8px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #eeeae1;
  border: 1px solid #e3dfd6;
}
.thumb img { width: 100%; height: 100%; object-fit: cover; }
.initial { font-weight: 700; color: #7a7a7a; }

.rowTitle { font-size: 0.98rem; flex: 1; font-family: var(--font-p); }

.overlay {
  position: fixed;
  inset: 0;
  background: var(--overlay);
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: overlay-fade 180ms ease;
}

.popup {
  background: var(--paper);
  color: var(--fg);
  border: 1px solid var(--line);
  border-radius: 18px;
  max-width: 560px;
  width: min(92%, 560px);
  max-height: 88vh;
  overflow-y: auto;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  box-shadow: var(--shadow);
  transform-origin: center;
  animation: pop-enter 200ms ease;
}

.popupHeader { display: flex; justify-content: space-between; align-items: center; padding-bottom: .25rem; border-bottom: 1px solid var(--line); }
.popupTitle { font-size: 1.35rem; font-weight: 800; margin: 0; font-family: var(--font-titre); letter-spacing: .2px; }
.closeBtn { background: var(--paper); border: 1px solid var(--line); color: var(--muted); font-size: 1rem; cursor: pointer; border-radius: 999px; padding: .25rem .5rem; line-height: 1; }
.closeBtn:hover { color: var(--fg); border-color: var(--couleur-bouton-action); background: color-mix(in srgb, var(--couleur-bouton-action) 16%, transparent); }

.hero { width: 100%; aspect-ratio: 16 / 9; border-radius: 12px; background: var(--subtle); display: flex; align-items: center; justify-content: center; overflow: hidden; border: 1px solid var(--line); }
.hero img { width: 100%; height: 100%; object-fit: cover; }
.heroInitial { font-size: 2.4rem; font-weight: 800; color: #8a8a8a; font-family: var(--font-titre); }

.metaGrid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.85rem; font-size: 0.95rem; font-family: var(--font-p); }
.metaGrid strong { display: block; color: var(--couleur-bouton-action); margin-bottom: 0.2rem; font-weight: 800; letter-spacing: .2px; }

.explain { font-size: 0.95rem; line-height: 1.6; font-family: var(--font-p); }

.popupDiv { display: flex; justify-content: flex-end; gap: 0.6rem; padding-top: .5rem; border-top: 1px solid var(--line); }
.primary { background: linear-gradient(180deg, var(--couleur-bouton-action), #F49B69); color: #1b1b1b; border: none; border-radius: 10px; padding: 0.6rem 0.95rem; cursor: pointer; font-weight: 800; box-shadow: 0 10px 26px rgba(244,155,105,0.28); transition: transform 120ms ease, box-shadow 160ms ease, filter 160ms ease; }
.primary:hover { filter: brightness(1.05); transform: translateY(-1px); }
.primary:active { transform: translateY(0); }

.secondary { background: var(--couleur-principale); color: var(--fg); border: 1px solid var(--line); border-radius: 10px; padding: 0.6rem 0.95rem; cursor: pointer; transition: background 160ms ease, box-shadow 160ms ease, transform 120ms ease; }
.secondary:hover { background: var(--paper); box-shadow: 0 3px 12px rgba(0,0,0,0.08); transform: translateY(-1px); }

@keyframes overlay-fade { from { opacity: 0; } to { opacity: 1; } }
@keyframes pop-enter { from { transform: translateY(6px) scale(0.985); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }

/* Accessibilit√© / motion */
@media (prefers-reduced-motion: reduce) {
  .row, .overlay, .popup, .primary, .secondary { transition: none; animation: none; }
}

/* Drag handle & delete button for row card */
/* Drag handle & delete button for row card */
.handle { display:flex; align-items:center; margin-right:.5rem; cursor:grab; }
.handle:active { cursor:grabbing; }

/* Six-dot grip for drag handle */
.grip {
  display: grid;
  grid-template-columns: repeat(2, 4px);
  grid-gap: 4px;
  margin-right: 0.5rem;
  justify-content: center;
  align-items: center;
}
.grip div {
  width: 4px;
  height: 4px;
  background-color: #888;
  border-radius: 50%;
}

.deleteBtn { background: transparent; border: 1px solid #f3d0c0; color:#c2410c; border-radius:8px; padding:.25rem .5rem; margin-left:.5rem; }
.deleteBtn:hover { background:#fff3ec; }

/* Popup footer (replaces .popupDiv in markup) */
.popupDiv { display: flex; justify-content: flex-end; gap: 0.6rem; padding-top: .5rem; border-top: 1px solid var(--line); }
